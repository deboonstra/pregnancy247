<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="pregnancy247">
<title>Process data for the Pregnancy 24/7 study • pregnancy247</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Process data for the Pregnancy 24/7 study">
<meta property="og:description" content="pregnancy247">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pregnancy247</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/pregnancy247.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/process-data.html">Process data for the Pregnancy 24/7 study</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Process data for the Pregnancy 24/7 study</h1>
            
      
      
      <div class="d-none name"><code>process-data.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="goal">Goal<a class="anchor" aria-label="anchor" href="#goal"></a>
</h2>
<p>The goal of <code><a href="../reference/process_data.html">process_data()</a></code> is process the Actiwatch,
sleep diary, and activPAL data for the Pregnancy 24/7 study. This
document will provide an overview of how to use
<code><a href="../reference/process_data.html">process_data()</a></code> appropriately based on the Pregnancy 24/7
study and data structures.</p>
</div>
<div class="section level2">
<h2 id="load-the-package">Load the package<a class="anchor" aria-label="anchor" href="#load-the-package"></a>
</h2>
<p>To process the Actiwatch, sleep diary, and activPAL data to the
specifications of the study use the <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code> command to
load the <code>pregnancy247</code> package, as shown below.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">pregnancy247</span><span class="op">)</span></span></code></pre></div>
<p>This allows the user to access all of the available functions present
in the package, such as <code><a href="../reference/process_data.html">process_data()</a></code>, without a direct
reference to the functions,
<code><a href="../reference/process_data.html">pregnancy247::process_data()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="set-the-working-directory">Set the working directory<a class="anchor" aria-label="anchor" href="#set-the-working-directory"></a>
</h2>
<p>The <code><a href="../reference/process_data.html">process_data()</a></code> function, which uses the
<code><a href="../reference/read_sleep.html">read_sleep()</a></code>, <code><a href="../reference/read_events.html">read_events()</a></code>,
<code>save_plot_1s_plot</code>, and all <code>write</code> functions,
requires that the working directory is set to the directory containing
the</p>
<ul>
<li>
<code>DATA_Iowa_activPAL</code>,</li>
<li>
<code>DATA_Pitt_activPAL</code>, and</li>
<li><code>DATA_WVU_activPAL</code></li>
</ul>
<p>sub-directories with subject-specific directories within each
sub-directory. Additionally, it also assumes that each visit during the
study period is the concatenation of the subject ID and trimester. The
requirement of the work directory and file system is based on the needs
of Pregnancy 24/7. Thus, to alter this requirement adjust the
dependencies of the file system in the read and write functions. If <a href="https://posit.co/products/open-source/rstudio/" class="external-link">RStdio</a> is
being used, the working directory may be set by the following.</p>
<ol style="list-style-type: decimal">
<li>Select the <em>Session</em> tab in the toolbar</li>
<li>Navigate to <em>Choose Directory …</em> listed within <em>Set
Working Directory</em>
</li>
<li>Navigate the file explorer to the main data processing folder, which
for the Pregnancy 24/7 is
<code>rdss_kawhitaker/Pregnancy247/ActivPAL Processing</code>
</li>
</ol>
</div>
<div class="section level2">
<h2 id="process-data">Process data<a class="anchor" aria-label="anchor" href="#process-data"></a>
</h2>
<p>To process the Actiwatch, sleep diary, and activPAL data for a
<em>single subject</em>, the <code><a href="../reference/process_data.html">process_data()</a></code> will be used.
This function takes a few arguments that are listed below. Once the
arguments are specified, all one needs to do is execute the function
call. This will depend on your operating system.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/process_data.html">process_data</a></span><span class="op">(</span>subject <span class="op">=</span> <span class="st">"1000-AB"</span>, trimester <span class="op">=</span> <span class="fl">1</span>, sleep_source <span class="op">=</span> <span class="st">"./sleep.csv"</span><span class="op">)</span></span></code></pre></div>
<p>The <code>subject</code> and <code>trimester</code> parameters allow
the activPAL data to imported by <code><a href="../reference/read_events.html">read_events()</a></code>.</p>
<ul>
<li>
<code>subject</code> denotes the study subject whose data is to be
processed and should be listed as <code>####-ab</code>.</li>
<li>
<code>trimester</code> denotes the pregnancy trimestery of the study
subject during the data collection period.</li>
<li>
<code>sleep_source</code> is the file name that contains the current
version of the sleep diary and Actiwatch data.
<ul>
<li>The variable names for this data are based on the Pregnancy 24/7
study.</li>
<li>Additionally, the <code><a href="../reference/read_sleep.html">read_sleep()</a></code> function is used to
import the <code>sleep_source</code> data.</li>
</ul>
</li>
<li>
<code>day1</code> through <code>day9</code> denotes whether each day
during the wear period is to be consider a valid day in terms of wearing
the activPAL device. By default, each day is a valid day. Whether or not
a day is valid is denoted by a <code>TRUE</code> or <code>FALSE</code>
logical value with the default being <code>TRUE</code>.
<ul>
<li>Once the data processing beings, there is the potiential for the
processing to stop if a missing sleep, nap, work, or monitor time
appears. A diaglog box will present itself when this occurs. The box
will read as <em>Day j has a missing (sleep/nap/work/monitor) time.
Would you like to stop processing?</em> Usually, processing is stopped
if an investigation of why a time is missing is needed. If the data
processor is aware of this missing time and would like to continue
processing the data, then answer <em>No</em>.</li>
<li>The processing may also stop if the subject is a shift-worker and
does not sleep during one of the wear days. If the subject does not
sleep for a day, stop the data processing and add in a sleep interval of
1 minute on the day of no sleep in the sleep diary. Then, process the
data again and do <strong>NOT</strong> stop the data processing due to
the subject being a shift-worker.</li>
</ul>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="outputted-data-sets">Outputted data sets<a class="anchor" aria-label="anchor" href="#outputted-data-sets"></a>
</h2>
<p>The entire creation of this function depends on the other functions
in the <code>pregnancy247</code> package. There is no <code>R</code>
object returned by this function, but files are written to their
appropriate subject-specific directories based on the
<code>subject</code> and <code>trimester</code> parameters. A total of
six data objects will be exported.</p>
<ul>
<li>
<em>Events data</em> are a collection of all the activity event that
occurred during the wear period. Additionally, indicator variables are
created to denote sleep, naps, and work times. These variables are named
<code>sleep_loop</code>, <code>nap_loop</code>, and
<code>work_loop</code>. The <code>wear_day</code> variables denotes the
day during the wear period, where each wear day begins with a sleep
window. Thus, the second wear day begins when the subject goes to after
day 1. The outputted data set is named
<code>####-ab(t)_eventfile.csv</code>, with <code>(t)</code> denoting
the trimester of pregnancy.</li>
<li>
<em>One second EPOCH data</em> are an expanded version of the events
data to a second by second accounting of activity during the wear
period. The outputted data set is named
<code>####-ab(t)_1secepoch.csv</code>, with <code>(t)</code> denoting
the trimester of pregnancy.</li>
<li>
<em>Daily values data</em> are a collection of daily movement and
sedentary metrics. These values are calculated using the archived <a href="https://github.com/deboonstra/activpalProcessing" class="external-link"><code>activpalProcessing</code></a>
package. By default, days 1 and 9 should not be used for further
activity analysis. However, if one of the other wear days have less than
10 hours of activPAL wear, day 1 may be considered for analysis if it
has at least 10 hours of wear. The outputted data set is named
<code>####-ab(t)_daily_values.csv</code>, with <code>(t)</code> denoting
the trimester of pregnancy.</li>
<li>
<em>Weekly averages data</em> are weekly averages of the movement
and sedentary metrics during the wear period. Only the days that
resulted in 10 hours or more of wear time are included in these
averages. The outputted data set is named
<code>####-ab(t)_weekly_avgs.csv</code>, with <code>(t)</code> denoting
the trimester of pregnancy. Additionally, the weekly averages are
included in a site-specific data set of weekly movement and sedentary
metrics. These data sets are <code>weekly_avgs_IOWA.csv</code> for the
University of Iowa, <code>weekly_avgs_PITT.csv</code> for the University
of Pittsburgh, and <code>weekly_avgs_WVU.csv</code> for West Virgina
University.</li>
<li>
<em>Graph</em> of wear day activity saved as a PDF. The outputted
data set is named <code>####-ab(t)_graph.pdf</code>, with
<code>(t)</code> denoting the trimester of pregnancy.</li>
</ul>
<p>The data dictionaries for these data sets may be found in <a href="https://github.com/deboonstra/pregnancy247/tree/main/inst/extdata" class="external-link"><code>inst/extdata</code></a>
of the package <a href="https://github.com/deboonstra/pregnancy247/tree/main" class="external-link">Github</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by D. Erik Boonstra.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
